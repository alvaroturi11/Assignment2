<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>DriveSphere — Data (Handlebars)</title>
    <link rel="stylesheet" href="assets/css/style.css" />
    <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.min.js"></script>
    <script defer src="assets/js/cars-data.js"></script>
    <script defer src="assets/js/data-handle.js"></script>
</head>

<body>
    <header class="site-header">
        <h1>DriveSphere</h1>
        <nav class="nav">
            <a href="index.html">Welcome</a>
            <a href="data.html">Data</a>
            <a class="active" href="data-handle.html">Data (HB)</a>
            <a href="about.html">About</a>
        </nav>
    </header>

    <main class="container">
        <section class="panel">
            <!-- LEFT COLUMN: form + search -->
            <div class="panel-left">
                <h3>Add a new car</h3>

                <form id="hbAddForm" class="form-grid" autocomplete="off">
                    <label>Registration Number
                        <input type="text" name="regNo" id="hbReg" required placeholder="e.g., 221-KK-1234" />
                    </label>

                    <label>Make
                        <input type="text" name="make" id="hbMake"
                            placeholder="Start typing a make…" list="hbMakeList" autocomplete="off" />
                        <datalist id="hbMakeList">
                            <option value="Ford"></option>
                            <option value="Hyundai"></option>
                            <option value="Toyota"></option>
                            <option value="Renault"></option>
                            <option value="Nissan"></option>
                            <option value="Tesla"></option>
                            <option value="Audi"></option>
                            <option value="Cupra"></option>
                            <option value="Fiat"></option>
                            <option value="Bmw"></option>
                            <option value="Mercedes"></option>
                            <option value="Volkswagen"></option>
                            <option value="Peugeot"></option>
                            <option value="Skoda"></option>
                            <option value="Kia"></option>
                            <option value="Seat"></option>
                            <option value="Opel"></option>
                            <option value="Citroen"></option>
                            <option value="Volvo"></option>
                            <option value="Mazda"></option>
                            <option value="Honda"></option>
                        </datalist>
                    </label>

                    <label>Model
                        <input type="text" name="model" id="hbModel" placeholder="Select a make first"
                            list="hbModelList" autocomplete="off" disabled />
                        <datalist id="hbModelList"></datalist>
                    </label>

                    <label>Colour
                        <input type="text" name="colour" id="hbColour" required placeholder="e.g., Blue" />
                    </label>

                    <label>Fuel type
                        <select name="fuelType" id="hbFuel" required>
                            <option value="" disabled selected hidden>Select fuel type</option>
                            <option value="Petrol">Petrol</option>
                            <option value="Diesel">Diesel</option>
                            <option value="Hybrid">Hybrid</option>
                            <option value="Plug-in Hybrid">Plug-in Hybrid</option>
                            <option value="Electric">Electric</option>
                        </select>
                    </label>

                    <label>Seats
                        <input type="number" name="seats" id="hbSeats" min="2" max="9" required
                            placeholder="e.g., 5" />
                    </label>

                    <div class="form-actions">
                        <button class="btn" type="submit">Add a New Car</button>
                        <button class="btn ghost" type="reset">Clear the Info</button>
                    </div>
                </form>

                <hr />

                <h3>Search</h3>
                <div class="search-rows">
                    <div class="row">
                        <label>Find by Registration
                            <input type="text" id="hbSearchReg" placeholder="e.g., 211-WD-234" />
                        </label>
                        <button class="btn" id="hbBtnFind" type="button">Find</button>
                    </div>

                    <div class="row">
                        <label>Filter by Make
                            <input type="text" id="hbSearchMake" placeholder="e.g., toyota" />
                        </label>
                        <label>Filter by Colour (optional)
                            <input type="text" id="hbSearchColour" placeholder="e.g., blue" />
                        </label>
                        <button class="btn" id="hbBtnFilter" type="button">Filter</button>
                        <button class="btn ghost" id="hbBtnClear" type="button">Clear</button>
                    </div>
                </div>

                <p id="hbSearchOutput" class="muted" style="margin-top:.5rem;"></p>

                <hr />

                <h3>Dataset actions</h3>
                <div class="form-actions">
                    <button class="btn ghost" id="saveBtn" type="button">Save dataset</button>
                    <button class="btn ghost" id="loadBtn" type="button">Load dataset</button>
                </div>
            </div>

            <!-- RIGHT COLUMN: main table + filtered results table -->
            <div class="panel-right">
                <h3>Cars table</h3>
                <div class="table-wrap">
                    <table id="hbCarsTable" class="table table-compact">
                        <thead>
                            <tr>
                                <th>Reg. No</th>
                                <th>Make</th>
                                <th>Model</th>
                                <th>Colour</th>
                                <th>Fuel</th>
                                <th>Seats</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="hbCarsBody"></tbody>
                    </table>
                </div>
                <p class="muted" id="hbCountLabel"></p>

                <h3 style="margin-top:1rem;">Filter results</h3>
                <div class="table-wrap">
                    <table id="hbFilterTable" class="table table-compact">
                        <thead>
                            <tr>
                                <th>Reg. No</th>
                                <th>Make</th>
                                <th>Model</th>
                                <th>Colour</th>
                                <th>Fuel</th>
                                <th>Seats</th>
                            </tr>
                        </thead>
                        <tbody id="hbFilterBody"></tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <!-- TEMPLATE HANDLEBARS -->
    <script id="cars-template" type="text/x-handlebars-template">
        {{#each cars}}
        <tr>
            <td>{{regNo}}</td>
            <td>{{make}}</td>
            <td>{{model}}</td>
            <td>{{colour}}</td>
            <td>{{fuelType}}</td>
            <td>{{seats}}</td>
            <td>
                <button class="btn small" data-del="{{regNo}}">Delete</button>
            </td>
        </tr>
        {{/each}}
    </script>

</body>

</html>
